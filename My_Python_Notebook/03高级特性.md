# 高级特性

## 目录

<!-- MarkdownTOC -->

- [切片](#切片)
- [迭代](#迭代)

<!-- /MarkdownTOC -->

在Python中，代码越少越简单约好。基于这一思想，后面的几个篇章介绍Python一些非常有用的高级特性。

比方说构造一个1~99的奇数列表，可以简单地用循环实现：

```python
L = []
n = 1
while n <= 99:
    L.append(n)
    n = n + 2
```

## 切片

切片即取一个list或tuple部分元素的操作。 当我们需要取列表前n个元素，即索引0~**N-1**的元素时，有两种方法：

1.方法1是用循环

```python
>>> L = ['Michael', 'Sarah', 'Tracy', 'Bob', 'Jack']
>>> r = []
>>> n = 3
>>> for i in range(n):
...     r.append(L[i])
...
>>> r
['Michael', 'Sarah', 'Tracy']
```

2.方法2是利用**切片操作符**

```python
>>> L[0:3]
['Michael', 'Sarah', 'Tracy']
```

如果经常要取指定的索引范围，用循环就显得太过繁琐了，Python提供了切片操作来简化这个过程。注意，**切片操作的索引左闭右开**。

如果索引从0开始，还可以改写为 `L[:3]`。 如果索引到列表最后结束，同样可以简略写为 `L[0:]`。

此外，Python还支持**倒数切片**。**列表最后一项的索引在倒数中为-1**。

```python
>>> L[-2:]
['Bob', 'Jack']
>>> L[-2:-1]
['Bob']
```

特别地，切片操作还支持每隔k个元素取1个这样的操作。先创建一个0~99的整数列表：

```python
>>> L = list(range(100))
>>> L
[0, 1, 2, 3, ..., 99]
```

取后10个只需起始索引为-10即可：

```python
>>> L[-10:]
[90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
```

前十个数隔两个取一个：

```python
>>> L[:10:2]
[0, 2, 4, 6, 8]
```

所有数，隔五个取一个：

```python
>>> L[::5]
[0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95]
```

注意！**对list进行切片操作得到的还是list；对tuple进行切片操作得到的还是tuple**。 特别地，**字符串也可看为一种list，同样可以使用切片操作**。

---

<br>

## 迭代

Python中可迭代的对象包括字符串，list，tuple，dict，set和文件等等。 对这些可迭代对象可以使用 `for...in` 循环来遍历。Python对for循环的抽象程度高于Java和C，所以即使没有下标也能迭代。

比如循环遍历一个dict：

```python
>>> d = {'a': 1, 'b': 2, 'c': 3}
>>> for key in d:
...   print(key, d[key])
...
a 1
c 3
b 2
```

直接打印key会打印所有dict中的key，更改迭代的写法为 `for value in d.values()` 就变为迭代dict中所有的value。 如果同时要访问key和value，还可以使用 `for k, v in d.items()`。

字符串同样可以用for循环迭代：

```python
>>> for ch in 'ABC':
...     print(ch)
...
A
B
C
```

要**判断一个对象是否可迭代对象可以通过collections模块的 `Iterable` 类型**来判断：

```python
>>> from collections import Iterable
>>> isinstance('abc', Iterable) # str是否可迭代
True
>>> isinstance([1,2,3], Iterable) # list是否可迭代
True
>>> isinstance(123, Iterable) # 整数是否可迭代
False
```

正如上面迭代dict一样，for循环可以同时引用两个甚至多个变量：

```python
>>> for i, value in enumerate(['A', 'B', 'C']):
...     print(i, value)
...
0 A
1 B
2 C

>>> for x, y in [(1, 1), (2, 4), (3, 9)]:
...     print(x, y)
...
1 1
2 4
3 9
```

例子里的 `enumerate` 方法通过[enumerate官方文档](https://docs.python.org/3/library/functions.html#enumerate)了解，它返回一个枚举对象，并且传入参数可迭代时它就是一个可迭代的对象。

**可以用 `list(enumerate(可迭代对象))` 把一个可迭代对象变为元素为tuple类型的list**，每个tuple有两个元素，形式如：`(序号，原可迭代对象内容)`。

并且使用enumerate时可以指定开始的序号，`enumerate(iterable, start=0)`，不写时默认参数为0，即序号从0开始。 可以自己指定为其他数。

---

<br>

